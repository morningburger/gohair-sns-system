<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§€ì  ë¹„êµ - GOHAIR SNS ë§ˆì¼€íŒ… ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <!-- Chart.js CDN (comparison.htmlì— í•„ìˆ˜) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/11.9.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="header-top">
                <h1>GOHAIR SNS ë§ˆì¼€íŒ… ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
                <div class="header-actions">
                    <span id="currentUser"></span>
                    <button class="btn" onclick="goToMainSystem()">ğŸ  ë©”ì¸ìœ¼ë¡œ</button>
                </div>
            </div>
            
            <nav class="nav">
                <button class="nav-btn" onclick="goToMainSystem()">ğŸ  ëŒ€ì‹œë³´ë“œ</button>
                <button class="nav-btn" onclick="goToPage('designers')">ğŸ‘¥ ë””ìì´ë„ˆ ê´€ë¦¬</button>
                <button class="nav-btn" onclick="goToPage('branches')">ğŸ¢ ì§€ì  ê´€ë¦¬</button>
                <button class="nav-btn" onclick="goToPage('history')">ğŸ“ˆ ë””ìì´ë„ˆ íˆìŠ¤í† ë¦¬</button>
                <button class="nav-btn" onclick="goToPage('checklist')">ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì…ë ¥</button>
                <button class="nav-btn" onclick="goToPage('statistics')">ğŸ“Š í†µê³„ ë¶„ì„</button>
                <button class="nav-btn active">âš–ï¸ ì§€ì  ë¹„êµ</button>
            </nav>
        </div>
    </div>

    <div class="container">
        <div id="comparisonPage">
            <div class="mb-6">
                <h2 class="text-2xl font-bold mb-4">âš–ï¸ ì§€ì  ë¹„êµ ë¶„ì„</h2>
                
                <div class="filter-controls">
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-bold mb-4">ë¹„êµí•  ì§€ì  ì„ íƒ</h3>
                            <div class="mb-4">
                                <label style="display: flex; align-items: center; font-weight: 600; color: #6366f1;">
                                    <input type="checkbox" id="selectAllBranches" style="margin-right: 0.5rem;"> 
                                    âœ… ì „ì§€ì  ì„ íƒ
                                </label>
                            </div>
                            
                            <div id="branchCheckboxes" style="display: grid; gap: 0.5rem;">
                                <label style="display: flex; align-items: center;">
                                    <input type="checkbox" value="ì†¡ë„1ì§€ì " style="margin-right: 0.5rem;">
                                    ì†¡ë„1ì§€ì 
                                </label>
                                <label style="display: flex; align-items: center;">
                                    <input type="checkbox" value="ê²€ë‹¨í…Œë¼ìŠ¤ì " style="margin-right: 0.5rem;">
                                    ê²€ë‹¨í…Œë¼ìŠ¤ì 
                                </label>
                                <label style="display: flex; align-items: center;">
                                    <input type="checkbox" value="ë¶€í‰ì " style="margin-right: 0.5rem;">
                                    ë¶€í‰ì 
                                </label>
                            </div>
                        </div>

                        <div>
                            <div style="display: grid; gap: 1rem;">
                                <div>
                                    <label class="font-medium">ğŸ“… ë¹„êµ ê¸°ê°„</label>
                                    <select id="comparisonPeriod">
                                        <option value="week">ì´ë²ˆ ì£¼</option>
                                        <option value="month">ì´ë²ˆ ë‹¬</option>
                                        <option value="quarter">ì´ë²ˆ ë¶„ê¸°</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="font-medium">ğŸ·ï¸ ì¹´í…Œê³ ë¦¬</label>
                                    <select id="comparisonCategory">
                                        <option value="all">ì „ì²´</option>
                                        <option value="reviews">ë„¤ì´ë²„ ë¦¬ë·°</option>
                                        <option value="posts">ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…</option>
                                        <option value="experience">ì²´í—˜ë‹¨</option>
                                        <option value="reels">ì¸ìŠ¤íƒ€ ë¦´ìŠ¤</option>
                                        <option value="photos">ì¸ìŠ¤íƒ€ ì‚¬ì§„</option>
                                    </select>
                                </div>
                                <button onclick="updateComparison()" class="btn" style="width: 100%;">
                                    ğŸ”„ ë¹„êµ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë¹„êµ ê²°ê³¼ -->
            <div id="comparisonResult" class="card">
                <div class="text-center" style="padding: 3rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">âš–ï¸</div>
                    <p style="color: #6b7280;">ì§€ì ì„ ì„ íƒí•˜ê³  "ë¹„êµ ì°¨íŠ¸ ì—…ë°ì´íŠ¸" ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="../js/config/firebase.js"></script>
    <script src="../js/config/data-manager.js"></script>
    <script src="../js/config/auth.js"></script>
    <script src="../js/config/ui-utils.js"></script>

    <script>
        // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸
        document.addEventListener('DOMContentLoaded', function() {
            const selectAllCheckbox = document.getElementById('selectAllBranches');
            const branchCheckboxes = document.querySelectorAll('#branchCheckboxes input[type="checkbox"]');
            
            selectAllCheckbox.addEventListener('change', function() {
                branchCheckboxes.forEach(checkbox => {
                    checkbox.checked = this.checked;
                });
            });
            
            // ê°œë³„ ì²´í¬ë°•ìŠ¤ ë³€ê²½ ì‹œ ì „ì²´ ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸
            branchCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checkedCount = document.querySelectorAll('#branchCheckboxes input[type="checkbox"]:checked').length;
                    selectAllCheckbox.checked = checkedCount === branchCheckboxes.length;
                });
            });
        });

        // ë¹„êµ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateComparison() {
            const selectedBranches = Array.from(document.querySelectorAll('#branchCheckboxes input[type="checkbox"]:checked'))
                .map(cb => cb.value);
            
            if (selectedBranches.length === 0) {
                alert('ë¹„êµí•  ì§€ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const period = document.getElementById('comparisonPeriod').value;
            const category = document.getElementById('comparisonCategory').value;
            
            // ì„ì‹œ ë¹„êµ ê²°ê³¼ í‘œì‹œ
            document.getElementById('comparisonResult').innerHTML = `
                <h3>ğŸ“Š ì§€ì  ë¹„êµ ê²°ê³¼</h3>
                <div style="margin-top: 1rem;">
                    <p><strong>ì„ íƒëœ ì§€ì :</strong> ${selectedBranches.join(', ')}</p>
                    <p><strong>ê¸°ê°„:</strong> ${period}</p>
                    <p><strong>ì¹´í…Œê³ ë¦¬:</strong> ${category}</p>
                    <p style="color: #6b7280; margin-top: 1rem;">
                        ğŸš§ ë¹„êµ ë¶„ì„ ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤. ê³§ ì—…ë°ì´íŠ¸ ì˜ˆì •ì…ë‹ˆë‹¤.
                    </p>
                </div>
            `;
        }
    <!-- JavaScript Files -->
    <script src="../js/config/firebase.js"></script>
    <script src="../js/utils/data-manager.js"></script>
    <script src="../js/utils/auth.js"></script>
    <script src="../js/utils/ui-utils.js"></script>
    <script src="../js/pages/designers.js"></script>
    <script src="../js/pages/history.js"></script>
    <script src="../js/pages/comparison.js"></script>

    <!-- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜ -->
    <script>
function goToMainSystem() {
    window.location.href = '../index.html';  // ìƒìœ„ í´ë”ë¡œ ì´ë™
}
        function goToPage(pageId) {
            const pages = {
                'designers': 'designers.html',
                'branches': 'branches.html',
                'checklist': 'checklist.html', 
                'statistics': 'statistics.html'
                
            };
            
            if (pages[pageId]) {
                window.location.href = pages[pageId];
            }
        }
        // ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜ë“¤


        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¸ì¦ í™•ì¸
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                if (window.authManager && window.authManager.isLoggedIn()) {
                    const userElement = document.getElementById('currentUser');
                    if (userElement) {
                        userElement.textContent = window.authManager.getCurrentUser().name;
                    }
                } else {
                    window.location.href = '../index.html';
                }
            }, 500);
        });
    </script>
</body>
</html>
